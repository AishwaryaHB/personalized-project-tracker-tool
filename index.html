<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Productivity Tool</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        
        // Simple icon components using text/symbols instead of Lucide
        const Clock = () => <span>🕐</span>;
        const Play = () => <span>▶️</span>;
        const Pause = () => <span>⏸️</span>;
        const Square = () => <span>⏹️</span>;
        const Plus = () => <span>➕</span>;
        const Calendar = () => <span>📅</span>;
        const Trash2 = () => <span>🗑️</span>;
        const Edit2 = () => <span>✏️</span>;
        const Save = () => <span>💾</span>;
        const X = () => <span>❌</span>;
        const Download = () => <span>⬇️</span>;
        const Upload = () => <span>⬆️</span>;
        const Bell = () => <span>🔔</span>;

        //import React, { useState, useEffect, useCallback } from 'react';
        //import { Clock, Play, Pause, Square, Plus, Settings, Calendar, CheckCircle2, Circle, Trash2, Edit2, Save, X, Download, Upload, Bell } from 'lucide-react';

const ProductivityTool = () => {
  // Default categories with better text contrast
  const defaultCategories = [
    { id: 'postdoc', name: 'Postdoctoral work', color: '#DBEAFE', textColor: '#1E40AF' },
    { id: 'scale', name: 'Scale AI', color: '#DCFCE7', textColor: '#166534' },
    { id: 'algoverse', name: 'Algoverse', color: '#FED7AA', textColor: '#C2410C' },
    { id: 'personal', name: 'Personal projects', color: '#E0E7FF', textColor: '#4338CA' },
    { id: 'fitness', name: 'Fitness', color: '#FCE7F3', textColor: '#BE185D' },
    { id: 'home', name: 'Home & Life', color: '#CCFBF1', textColor: '#0F766E' },
    { id: 'social', name: 'Social', color: '#FEF3C7', textColor: '#A16207' }
  ];

  // State management
  const [categories, setCategories] = useState(defaultCategories);
  const [projects, setProjects] = useState([]);
  const [timeBlocks, setTimeBlocks] = useState([]);
  const [currentView, setCurrentView] = useState('week');
  const [selectedDate, setSelectedDate] = useState(new Date());
  const [currentWeekStart, setCurrentWeekStart] = useState(() => {
    const today = new Date();
    const start = new Date(today);
    start.setDate(today.getDate() - today.getDay());
    return start;
  });
  const [pomodoro, setPomodoro] = useState({
    isActive: false,
    timeLeft: 25 * 60,
    blockId: null,
    isBreak: false,
    duration: 25
  });
  const [editingCategory, setEditingCategory] = useState(null);
  const [newCategory, setNewCategory] = useState({ name: '', color: '#DBEAFE', textColor: '#1E40AF' });
  const [showAddCategory, setShowAddCategory] = useState(false);
  const [notifications, setNotifications] = useState([]);

  // Load data from localStorage on component mount
  useEffect(() => {
    const savedCategories = localStorage.getItem('productivity-categories');
    const savedProjects = localStorage.getItem('productivity-projects');
    const savedTimeBlocks = localStorage.getItem('productivity-timeblocks');

    if (savedCategories) setCategories(JSON.parse(savedCategories));
    if (savedProjects) setProjects(JSON.parse(savedProjects));
    if (savedTimeBlocks) setTimeBlocks(JSON.parse(savedTimeBlocks));
  }, []);

  // Save data to localStorage whenever state changes
  useEffect(() => {
    localStorage.setItem('productivity-categories', JSON.stringify(categories));
  }, [categories]);

  useEffect(() => {
    localStorage.setItem('productivity-projects', JSON.stringify(projects));
  }, [projects]);

  useEffect(() => {
    localStorage.setItem('productivity-timeblocks', JSON.stringify(timeBlocks));
  }, [timeBlocks]);

  // Helper functions
  const formatTime = (seconds) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
  };

  const getWeekDays = (startDate) => {
    const days = [];
    for (let i = 0; i < 7; i++) {
      const day = new Date(startDate);
      day.setDate(startDate.getDate() + i);
      days.push(day);
    }
    return days;
  };

  const navigateWeek = (direction) => {
    const newWeekStart = new Date(currentWeekStart);
    newWeekStart.setDate(currentWeekStart.getDate() + (direction * 7));
    setCurrentWeekStart(newWeekStart);
  };

  const goToCurrentWeek = () => {
    const today = new Date();
    const start = new Date(today);
    start.setDate(today.getDate() - today.getDay());
    setCurrentWeekStart(start);
  };

  const addProject = (categoryId) => {
    const newProject = {
      id: Date.now().toString(),
      categoryId,
      name: 'New Project',
      milestones: [],
      totalTime: 0,
      isEditing: true
    };
    setProjects([...projects, newProject]);
  };

  const updateProject = (projectId, updates) => {
    setProjects(projects.map(p => p.id === projectId ? { ...p, ...updates } : p));
  };

  const updateProjectTime = (projectId, minutes) => {
    setProjects(projects.map(p => 
      p.id === projectId ? { ...p, totalTime: (p.totalTime || 0) + minutes } : p
    ));
  };

  const addMilestone = (projectId) => {
    const newMilestone = {
      id: Date.now().toString(),
      name: 'New Milestone',
      deadline: '',
      tasks: [],
      completed: false,
      isEditing: true
    };
    updateProject(projectId, {
      milestones: [...(projects.find(p => p.id === projectId)?.milestones || []), newMilestone]
    });
  };

    //const addTimeBlock = (date, duration = 30) => {
    //const newBlock = {
      //id: Date.now().toString(),
      //date: date.toISOString().split('T')[0],
      //startTime: '09:00',
      //duration,
      //title: 'New Task',
      //projectId: null,
      //milestoneId: null,
      //isEditing: true
    //};
    //setTimeBlocks([...timeBlocks, newBlock]);

      const addTimeBlock = (date, duration = 30) => {
  const newBlock = {
    id: Date.now().toString(),
    date: date.toISOString().split('T')[0],
    startTime: '09:00',
    duration,
    title: 'New Task',
    projectId: null,
    milestoneId: null,
    completed: false,
    isEditing: true
  };
  setTimeBlocks([...timeBlocks, newBlock]);
};

// Toggle time block as completed vs ongoing/coming up
const toggleBlockCompletion = (blockId) => {
  setTimeBlocks(timeBlocks.map(b => 
    b.id === blockId ? { ...b, completed: !b.completed } : b
  ));
};
    
  const startPomodoro = (blockId) => {
    setPomodoro({
      isActive: true,
      timeLeft: pomodoro.duration * 60,
      blockId,
      isBreak: false,
      duration: pomodoro.duration
    });
  };

  const togglePomodoro = () => {
    setPomodoro(prev => ({ ...prev, isActive: !prev.isActive }));
  };

  const stopPomodoro = () => {
    setPomodoro(prev => ({
      isActive: false,
      timeLeft: prev.duration * 60,
      blockId: null,
      isBreak: false,
      duration: prev.duration
    }));
  };

  const togglePomodoroDuration = () => {
    const newDuration = pomodoro.duration === 25 ? 45 : 25;
    setPomodoro(prev => ({
      ...prev,
      duration: newDuration,
      timeLeft: prev.isActive ? prev.timeLeft : newDuration * 60
    }));
  };

  const exportData = () => {
    const data = {
      categories,
      projects,
      timeBlocks,
      exportDate: new Date().toISOString()
    };
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'productivity-data.json';
    a.click();
  };

  const importData = (event) => {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const data = JSON.parse(e.target.result);
          if (data.categories) setCategories(data.categories);
          if (data.projects) setProjects(data.projects);
          if (data.timeBlocks) setTimeBlocks(data.timeBlocks);
        } catch (error) {
          alert('Error importing data. Please check the file format.');
        }
      };
      reader.readAsText(file);
    }
  };

  const addCategory = () => {
    if (newCategory.name.trim()) {
      const category = {
        id: Date.now().toString(),
        name: newCategory.name.trim(),
        color: newCategory.color,
        textColor: newCategory.textColor
      };
      setCategories([...categories, category]);
      setNewCategory({ name: '', color: '#DBEAFE', textColor: '#1E40AF' });
      setShowAddCategory(false);
    }
  };

  const deleteCategory = (categoryId) => {
    setCategories(categories.filter(c => c.id !== categoryId));
    setProjects(projects.filter(p => p.categoryId !== categoryId));
  };

  // Pomodoro timer logic
  useEffect(() => {
    let interval = null;
    if (pomodoro.isActive && pomodoro.timeLeft > 0) {
      interval = setInterval(() => {
        setPomodoro(prev => ({ ...prev, timeLeft: prev.timeLeft - 1 }));
      }, 1000);
    } else if (pomodoro.timeLeft === 0) {
      if (!pomodoro.isBreak) {
        const block = timeBlocks.find(b => b.id === pomodoro.blockId);
        if (block) {
          updateProjectTime(block.projectId, pomodoro.duration);
        }
      }
      setPomodoro(prev => ({ ...prev, isActive: false }));
    }
    return () => clearInterval(interval);
  }, [pomodoro.isActive, pomodoro.timeLeft, timeBlocks, pomodoro.duration, pomodoro.isBreak, pomodoro.blockId]);

  // Check for upcoming notifications
  useEffect(() => {
    const checkNotifications = () => {
      const now = new Date();
      const upcomingBlocks = timeBlocks.filter(block => {
        const blockStart = new Date(block.date + 'T' + block.startTime);
        const timeDiff = blockStart - now;
        return timeDiff > 0 && timeDiff <= 15 * 60 * 1000;
      });

      upcomingBlocks.forEach(block => {
        if (!notifications.find(n => n.blockId === block.id)) {
          setNotifications(prev => [...prev, {
            id: Date.now(),
            blockId: block.id,
            message: `"${block.title}" starts in 15 minutes`,
            timestamp: now
          }]);
        }
      });
    };

    const interval = setInterval(checkNotifications, 60000);
    return () => clearInterval(interval);
  }, [timeBlocks, notifications]);

  const weekDays = getWeekDays(currentWeekStart);
  const todayBlocks = timeBlocks.filter(block => 
    block.date === new Date().toISOString().split('T')[0]
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-white via-blue-50/20 to-purple-50/20">
      {/* Header */}
      <div className="bg-white/80 backdrop-blur-sm border-b border-gray-200/50 px-6 py-4">
        <div className="flex items-center justify-between">
          <h1 className="text-2xl font-semibold text-gray-900">Personal Productivity Hub</h1>
          <div className="flex items-center gap-4">
            {/* Notifications */}
            {notifications.length > 0 && (
              <div className="relative">
                <Bell className="w-5 h-5 text-orange-500" />
                <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">
                  {notifications.length}
                </span>
              </div>
            )}
            
            {/* Pomodoro Timer */}
            <div className="flex items-center gap-2 bg-white/60 rounded-lg px-3 py-2">
              <Clock className="w-4 h-4 text-gray-600" />
              <button
                onClick={togglePomodoroDuration}
                className="text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded transition-colors"
                title={`Switch to ${pomodoro.duration === 25 ? '45' : '25'} minutes`}
              >
                {pomodoro.duration}m
              </button>
              <span className="font-mono text-sm">{formatTime(pomodoro.timeLeft)}</span>
              <div className="flex gap-1">
                <button 
                  onClick={togglePomodoro}
                  className="p-1 hover:bg-gray-100 rounded"
                >
                  {pomodoro.isActive ? <Pause className="w-3 h-3" /> : <Play className="w-3 h-3" />}
                </button>
                <button 
                  onClick={stopPomodoro}
                  className="p-1 hover:bg-gray-100 rounded"
                >
                  <Square className="w-3 h-3" />
                </button>
              </div>
            </div>

            {/* View Toggle */}
            <div className="flex bg-gray-100 rounded-lg p-1">
              <button
                onClick={() => setCurrentView('week')}
                className={`px-3 py-1 rounded text-sm transition-colors ${
                  currentView === 'week' ? 'bg-white shadow-sm' : 'text-gray-600'
                }`}
              >
                Week
              </button>
              <button
                onClick={() => setCurrentView('today')}
                className={`px-3 py-1 rounded text-sm transition-colors ${
                  currentView === 'today' ? 'bg-white shadow-sm' : 'text-gray-600'
                }`}
              >
                Today
              </button>
            </div>

            {/* Export/Import */}
            <div className="flex gap-2">
              <button
                onClick={exportData}
                className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                title="Export Data"
              >
                <Download className="w-4 h-4" />
              </button>
              <label className="p-2 hover:bg-gray-100 rounded-lg transition-colors cursor-pointer" title="Import Data">
                <Upload className="w-4 h-4" />
                <input type="file" accept=".json" onChange={importData} className="hidden" />
              </label>
            </div>
          </div>
        </div>
      </div>

      <div className="flex">
        {/* Sidebar */}
        <div className="w-80 bg-white/60 backdrop-blur-sm border-r border-gray-200/50 h-screen overflow-y-auto">
          <div className="p-6">
            <div className="flex items-center justify-between mb-6">
              <h2 className="font-semibold text-gray-900">Project Categories</h2>
              <button
                onClick={() => setShowAddCategory(true)}
                className="p-1 hover:bg-gray-100 rounded transition-colors"
              >
                <Plus className="w-4 h-4" />
              </button>
            </div>

            {/* Add Category Form */}
            {showAddCategory && (
              <div className="mb-4 p-3 bg-gray-50 rounded-lg">
                <input
                  type="text"
                  placeholder="Category name"
                  value={newCategory.name}
                  onChange={(e) => setNewCategory({ ...newCategory, name: e.target.value })}
                  className="w-full p-2 border rounded mb-2 text-sm"
                />
                <input
                  type="color"
                  value={newCategory.color}
                  onChange={(e) => setNewCategory({ ...newCategory, color: e.target.value })}
                  className="w-full h-8 border rounded mb-2"
                />
                <input
                  type="color"
                  value={newCategory.textColor}
                  onChange={(e) => setNewCategory({ ...newCategory, textColor: e.target.value })}
                  className="w-full h-8 border rounded mb-2"
                  title="Text color"
                />
                <div className="flex gap-2">
                  <button
                    onClick={addCategory}
                    className="flex-1 bg-blue-500 text-white py-1 rounded text-sm hover:bg-blue-600 transition-colors"
                  >
                    Add
                  </button>
                  <button
                    onClick={() => setShowAddCategory(false)}
                    className="flex-1 bg-gray-300 py-1 rounded text-sm hover:bg-gray-400 transition-colors"
                  >
                    Cancel
                  </button>
                </div>
              </div>
            )}

            {/* Categories */}
            <div className="space-y-4">
              {categories.map(category => (
                <div key={category.id} className="space-y-2">
                  <div className="flex items-center justify-between">
                    {editingCategory === category.id ? (
                      <div className="flex-1 flex gap-2">
                        <input
                          type="text"
                          value={category.name}
                          onChange={(e) => setCategories(categories.map(c => 
                            c.id === category.id ? { ...c, name: e.target.value } : c
                          ))}
                          className="flex-1 p-1 border rounded text-sm"
                        />
                        <button
                          onClick={() => setEditingCategory(null)}
                          className="p-1 hover:bg-gray-100 rounded"
                        >
                          <Save className="w-3 h-3" />
                        </button>
                      </div>
                    ) : (
                      <>
                        <h3 
                          className="font-medium text-sm"
                          style={{ color: category.textColor || '#374151' }}
                        >
                          {category.name}
                        </h3>
                        <div className="flex gap-1">
                          <button
                            onClick={() => setEditingCategory(category.id)}
                            className="p-1 hover:bg-gray-100 rounded"
                          >
                            <Edit2 className="w-3 h-3" />
                          </button>
                          <button
                            onClick={() => deleteCategory(category.id)}
                            className="p-1 hover:bg-gray-100 rounded text-red-600"
                          >
                            <Trash2 className="w-3 h-3" />
                          </button>
                          <button
                            onClick={() => addProject(category.id)}
                            className="p-1 hover:bg-gray-100 rounded"
                          >
                            <Plus className="w-3 h-3" />
                          </button>
                        </div>
                      </>
                    )}
                  </div>

                  {/* Projects in category */}
                  <div className="pl-4 space-y-2">
                    {projects.filter(p => p.categoryId === category.id).map(project => (
                      <div
                        key={project.id}
                        className="p-3 rounded-lg border cursor-pointer hover:shadow-sm transition-shadow"
                        style={{ backgroundColor: category.color }}
                      >
                        {project.isEditing ? (
                          <input
                            type="text"
                            value={project.name}
                            onChange={(e) => updateProject(project.id, { name: e.target.value })}
                            onBlur={() => updateProject(project.id, { isEditing: false })}
                            onKeyPress={(e) => e.key === 'Enter' && updateProject(project.id, { isEditing: false })}
                            autoFocus
                            className="w-full bg-transparent border-none outline-none text-sm font-medium"
                          />
                        ) : (
                          <div onClick={() => updateProject(project.id, { isEditing: true })}>
                            <h4 className="text-sm font-medium">{project.name}</h4>
                            <p className="text-xs text-gray-600 mt-1">
                              {project.milestones?.length || 0} milestones • {Math.round(project.totalTime || 0)}h tracked
                            </p>
                          </div>
                        )}
                        <button
                          onClick={() => addMilestone(project.id)}
                          className="mt-2 text-xs text-blue-600 hover:underline"
                        >
                          + Add milestone
                        </button>
                      </div>
                    ))}
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>

        {/* Main Content */}
        <div className="flex-1">
          {currentView === 'week' ? (
            /* Week View */
            <div className="p-6">
              <div className="flex items-center justify-between mb-6">
                <div className="flex items-center gap-4">
                  <h2 className="text-xl font-semibold">Week Overview</h2>
                  <div className="flex items-center gap-2">
                    <button
                      onClick={() => navigateWeek(-1)}
                      className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                      title="Previous week"
                    >
                      <span className="text-lg">←</span>
                    </button>
                    <button
                      onClick={goToCurrentWeek}
                      className="px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors"
                    >
                      Today
                    </button>
                    <button
                      onClick={() => navigateWeek(1)}
                      className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                      title="Next week"
                    >
                      <span className="text-lg">→</span>
                    </button>
                  </div>
                  <span className="text-sm text-gray-600">
                    {currentWeekStart.toLocaleDateString('en-US', { 
                      month: 'long', 
                      day: 'numeric',
                      year: 'numeric'
                    })} - {new Date(currentWeekStart.getTime() + 6 * 24 * 60 * 60 * 1000).toLocaleDateString('en-US', { 
                      month: 'long', 
                      day: 'numeric',
                      year: 'numeric'
                    })}
                  </span>
                </div>
                <div className="flex gap-2">
                  <button
                    onClick={() => addTimeBlock(new Date(), 30)}
                    className="bg-blue-500 text-white px-3 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm"
                  >
                    + 30min
                  </button>
                  <button
                    onClick={() => addTimeBlock(new Date(), 60)}
                    className="bg-green-500 text-white px-3 py-2 rounded-lg hover:bg-green-600 transition-colors text-sm"
                  >
                    + 1hr
                  </button>
                  <button
                    onClick={() => addTimeBlock(new Date(), 120)}
                    className="bg-purple-500 text-white px-3 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm"
                  >
                    + 2hr
                  </button>
                </div>
              </div>

              <div className="grid grid-cols-7 gap-4">
                {weekDays.map((day, index) => (
                  <div key={index} className="bg-white/60 backdrop-blur-sm rounded-lg p-4">
                    <h3 className="font-medium text-center mb-3">
                      {day.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}
                    </h3>
                    <div className="space-y-2 min-h-96">
                      {timeBlocks
                        .filter(block => block.date === day.toISOString().split('T')[0])
                        .sort((a, b) => a.startTime.localeCompare(b.startTime))
                        .map(block => {
                          const project = projects.find(p => p.id === block.projectId);
                          const category = categories.find(c => c.id === project?.categoryId);
                          
                          return (
                            <div
                              key={block.id}
                              className="p-2 rounded border text-sm hover:shadow-sm transition-shadow cursor-pointer group"
                              style={{ backgroundColor: category?.color || '#f3f4f6', color: category?.textColor || '#374151' }}
                            >
                              {block.isEditing ? (
                                <div className="space-y-2">
                                  <input
                                    type="text"
                                    value={block.title}
                                    onChange={(e) => setTimeBlocks(timeBlocks.map(b => 
                                      b.id === block.id ? { ...b, title: e.target.value } : b
                                    ))}
                                    className="w-full p-1 border rounded text-xs"
                                    placeholder="Task title"
                                  />
                                  <input
                                    type="time"
                                    value={block.startTime}
                                    onChange={(e) => setTimeBlocks(timeBlocks.map(b => 
                                      b.id === block.id ? { ...b, startTime: e.target.value } : b
                                    ))}
                                    className="w-full p-1 border rounded text-xs"
                                  />
                                  <select
                                    value={block.duration}
                                    onChange={(e) => setTimeBlocks(timeBlocks.map(b => 
                                      b.id === block.id ? { ...b, duration: parseInt(e.target.value) } : b
                                    ))}
                                    className="w-full p-1 border rounded text-xs"
                                  >
                                    <option value={30}>30 min</option>
                                    <option value={60}>1 hour</option>
                                    <option value={90}>1.5 hours</option>
                                    <option value={120}>2 hours</option>
                                  </select>
                                  <select
                                    value={block.projectId || ''}
                                    onChange={(e) => setTimeBlocks(timeBlocks.map(b => 
                                      b.id === block.id ? { ...b, projectId: e.target.value || null } : b
                                    ))}
                                    className="w-full p-1 border rounded text-xs"
                                  >
                                    <option value="">Select project</option>
                                    {projects.map(project => (
                                      <option key={project.id} value={project.id}>
                                        {project.name}
                                      </option>
                                    ))}
                                  </select>
                                  <div className="flex gap-1">
                                    <button
                                      onClick={() => setTimeBlocks(timeBlocks.map(b => 
                                        b.id === block.id ? { ...b, isEditing: false } : b
                                      ))}
                                      className="flex-1 bg-blue-500 text-white py-1 rounded text-xs hover:bg-blue-600"
                                    >
                                      Save
                                    </button>
                                    <button
                                      onClick={() => setTimeBlocks(timeBlocks.filter(b => b.id !== block.id))}
                                      className="bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600"
                                    >
                                      <Trash2 className="w-3 h-3" />
                                    </button>
                                  </div>
                                </div>
                              ) : (
                                <div>
                                  //<div className="flex items-center justify-between">
                                    //<span className="font-medium">{block.title}</span>
                                      <div className="flex items-center justify-between">
  <span 
    className={`font-medium ${block.completed ? 'line-through opacity-60' : ''}`}
    onClick={() => toggleBlockCompletion(block.id)}
    style={{ cursor: 'pointer' }}
  >
    {block.completed ? '✓ ' : ''}{block.title}
  </span>
                                    <button
                                      onClick={() => startPomodoro(block.id)}
                                      className="opacity-0 group-hover:opacity-100 p-1 hover:bg-white/50 rounded transition-all"
                                    >
                                      <Play className="w-3 h-3" />
                                    </button>
                                  </div>
                                  <div className="text-xs text-gray-600 mt-1">
                                    {block.startTime} • {block.duration}min
                                  </div>
                                  {project && (
                                    <div className="text-xs text-gray-600 mt-1">
                                      {project.name}
                                    </div>
                                  )}
                                  <div className="opacity-0 group-hover:opacity-100 transition-opacity">
                                    <button
                                      onClick={() => setTimeBlocks(timeBlocks.map(b => 
                                        b.id === block.id ? { ...b, isEditing: true } : b
                                      ))}
                                      className="text-xs text-blue-600 hover:underline mr-2"
                                    >
                                      Edit
                                    </button>
                                  </div>
                                </div>
                              )}
                            </div>
                          );
                        })}
                    </div>
                  </div>
                ))}
              </div>
            </div>
          ) : (
            /* Today View */
            <div className="p-6">
              <h2 className="text-xl font-semibold mb-6">Today's Focus</h2>
              
              <div className="grid grid-cols-1 gap-4 max-w-2xl">
                {todayBlocks.length === 0 ? (
                  <div className="text-center py-12 text-gray-500">
                    <Calendar className="w-12 h-12 mx-auto mb-4 opacity-50" />
                    <p>No tasks scheduled for today</p>
                    <button
                      onClick={() => addTimeBlock(new Date())}
                      className="mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"
                    >
                      Add your first task
                    </button>
                  </div>
                ) : (
                  todayBlocks
                    .sort((a, b) => a.startTime.localeCompare(b.startTime))
                    .map(block => {
                      const project = projects.find(p => p.id === block.projectId);
                      const category = categories.find(c => c.id === project?.categoryId);
                      
                      return (
                        <div
                          key={block.id}
                          className="p-4 rounded-lg border hover:shadow-md transition-shadow"
                          style={{ backgroundColor: category?.color || '#f3f4f6', color: category?.textColor || '#374151' }}
                        >
                          <div className="flex items-center justify-between">
                            <div>
                              <h3 className="font-medium">{block.title}</h3>
                              <p className="text-sm text-gray-600 mt-1">
                                {block.startTime} • {block.duration} minutes
                              </p>
                              {project && (
                                <p className="text-sm text-gray-700 mt-1">
                                  {project.name}
                                </p>
                              )}
                            </div>
                            <button
                              onClick={() => startPomodoro(block.id)}
                              className="bg-white/60 hover:bg-white/80 p-3 rounded-lg transition-colors"
                            >
                              <Play className="w-5 h-5" />
                            </button>
                          </div>
                        </div>
                      );
                    })
                )}
              </div>
            </div>
          )}
        </div>
      </div>

      {/* Notifications */}
      {notifications.length > 0 && (
        <div className="fixed bottom-4 right-4 space-y-2">
          {notifications.map(notification => (
            <div
              key={notification.id}
              className="bg-orange-100 border border-orange-300 text-orange-800 p-3 rounded-lg shadow-lg flex items-center justify-between"
            >
              <span className="text-sm">{notification.message}</span>
              <button
                onClick={() => setNotifications(notifications.filter(n => n.id !== notification.id))}
                className="ml-2 text-orange-600 hover:text-orange-800"
              >
                <X className="w-4 h-4" />
              </button>
            </div>
          ))}
        </div>
      )}
    </div>
  );
};

//export default ProductivityTool;
        
        // Then add this at the bottom:
        ReactDOM.render(<ProductivityTool />, document.getElementById('root'));
    </script>
</body>
</html>
